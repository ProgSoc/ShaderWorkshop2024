{"name":"[Example] Bloom","goals":[],"shaders":[{"filename":"main.vert","contents":"#version 300 es\n\nin vec3 position;\nin vec3 normal;\nin vec2 uv;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nuniform mat4 lightView;\nuniform mat4 lightProjection;\n\nout vec3 vNormal;\nout vec2 vUv;\nout vec4 vPos;\nout vec4 vLightUv;\n\nvoid main() {\n    vUv = uv;\n    vNormal = (model * vec4(normal, 0.)).xyz;\n    vPos = model * vec4(position, 1.);\n    vLightUv = lightProjection * lightView * vPos;\n    gl_Position = projection * view * vPos;\n}"},{"filename":"main.frag","contents":"#version 300 es\n\nprecision highp float;\n\nin vec3 vNormal;\nin vec2 vUv;\nin vec4 vPos;\nin vec4 vLightUv;\n\nout vec4 FragColor;\n\nuniform sampler2D shadowMap;\nuniform float time;\nuniform float luminescence;\n\nfloat shadow() {\n    // The projected coordinates using the light source camera's\n    // projection and view matrix. These are projected in the vertex shader.\n    vec3 projCoords = vLightUv.xyz / vLightUv.w;\n    // Convert to screen space\n    projCoords = projCoords * 0.5 + 0.5;\n\n    // Loop around the area and average to soften the shadows\n    #define SHADOW_MAP_SAMPLES 7\n    float shadow = 0.;\n    float totalWeight = 0.;\n    for (int x = -SHADOW_MAP_SAMPLES; x < SHADOW_MAP_SAMPLES; x++) {\n        for (int y = -SHADOW_MAP_SAMPLES; y < SHADOW_MAP_SAMPLES; y++) {\n            float r2 = float(x * x + y * y);\n            float R2 = float(SHADOW_MAP_SAMPLES * SHADOW_MAP_SAMPLES);\n\n            // Create a circle blur kernel\n            if (r2 > R2) continue;\n\n            // give less weight to more distant fragments\n            float distWeight = 1. - (r2 / R2);\n\n            float currentDepth = projCoords.z;\n            vec2 offset = vec2(x, y) * 0.005;\n\n            // Sample from the depth map using the projected coordinates\n            float closestDepth = texture(shadowMap, projCoords.xy + offset).r;\n            bool inShadow = currentDepth - 0.0004 > closestDepth;\n\n            shadow += (inShadow ? 0.4 : 1.0) * distWeight; \n            totalWeight += distWeight;\n        }\n    }\n    shadow /= totalWeight;\n\n    return shadow;\n}\n\nvoid main() {\n    vec3 normal = normalize(vNormal);\n    vec3 ambient = vec3(0.1, 0.2, 1);\n    vec3 sun = vec3(-1, -1, -1);\n\n    float angle = clamp(-dot(normalize(normal), normalize(sun)), 0., 1.);\n    float diffuseBrightness = angle;\n\n    vec3 cameraPosition = vec3(-8., 4., 8.);\n\n    vec3 viewDirection = normalize(vPos.xyz - cameraPosition);\n    vec3 reflectionDirection = normalize(2. * dot(normal, sun) * normal - sun);\n    float specularAngle = clamp(dot(viewDirection, reflectionDirection), 0., 1.);\n    vec3 specular = vec3(pow(specularAngle, 20.));\n\n    float F0 = 0.2;\n    float F = F0 + (1. - F0) * pow((1. - max(-dot(normal, viewDirection), 0.)), 3.);\n\n    float edgeLighting = (F) * 0.3;\n\n    vec3 final = mix((ambient) * diffuseBrightness, ambient, 0.1) \n        + specular * F * 5.\n        + edgeLighting;\n\n    final *= shadow();\n\n    final += luminescence;\n    \n    FragColor = vec4(final, 1.);\n}"},{"filename":"empty.frag","contents":"#version 300 es\n\nprecision highp float;\n\nout vec4 FragColor;\n\nvoid main() {\n    FragColor = vec4(1.);\n}"},{"filename":"shadowProj.vert","contents":"#version 300 es\n\nin vec3 position;\nin vec3 normal;\nin vec2 uv;\n\nuniform mat4 model;\nuniform mat4 view;\nuniform mat4 projection;\n\nvoid main() {\n    vec4 vPos = model * vec4(position, 1.);\n    gl_Position = projection * view * vPos;\n}"},{"filename":"screen.vert","contents":"#version 300 es\n\nin vec4 position;\nout vec2 vUv;\n\nvoid main(void) {\n    vUv = (position.xy + 1.0)/2.0;\n    gl_Position = position;\n}"},{"filename":"post.frag","contents":"#version 300 es\n\nprecision highp float;\n\nin vec2 vUv;\nout vec4 FragColor;\n\nuniform sampler2D tex;\nuniform sampler2D bloom;\nuniform vec2 screenSize;\nuniform float time;\n\nvec3 reinhardExtended(vec3 x) {\n    const float L_white = 3.;\n    return (x * (1.0 + x / (L_white * L_white))) / (1.0 + x);\n}\n\nvoid main() {\n    vec3 bloomSample = texture(bloom, vUv).rgb;\n    vec3 col = texture(tex, vUv).rgb + bloomSample * 0.8;\n\n    FragColor = vec4(reinhardExtended(col) * 1.5, 1.);\n}"},{"filename":"bloomDownSample.frag","contents":"#version 300 es\n\nprecision highp float;\n\nin vec2 vUv;\nout vec4 FragColor;\n\nuniform sampler2D tex;\nuniform float spread;\n\nvoid main() {\n    const vec2 POINTS[64] = vec2[64](\n        vec2(-0.003881274, 0.000928915),\n        vec2(-0.000865569, -0.002880188),\n        vec2(0.001102385, 0.001859909),\n        vec2(0.001759688, 0.002589512),\n        vec2(-0.001659685, -0.000329540),\n        vec2(-0.001822142, 0.001220218),\n        vec2(0.003623614, -0.001292130),\n        vec2(-0.003551945, -0.001451195),\n        vec2(0.002163543, -0.001341711),\n        vec2(0.002203958, -0.002163799),\n        vec2(0.001143628, -0.003571097),\n        vec2(0.003261412, 0.001874330),\n        vec2(-0.003474127, 0.000292293),\n        vec2(-0.002781102, -0.001327407),\n        vec2(0.002523564, 0.000038062),\n        vec2(0.002036824, 0.003413932),\n        vec2(-0.003587476, 0.001729648),\n        vec2(-0.001293790, 0.003659394),\n        vec2(0.000828157, 0.003820023),\n        vec2(0.001193215, -0.002256466),\n        vec2(0.000501027, 0.002707031),\n        vec2(0.001602391, -0.000137347),\n        vec2(0.002787795, 0.000810632),\n        vec2(-0.001923072, -0.001046660),\n        vec2(0.003049630, -0.002229524),\n        vec2(-0.002909376, 0.002468441),\n        vec2(0.003385159, -0.000217441),\n        vec2(0.000960226, 0.000953568),\n        vec2(-0.003560805, -0.000578855),\n        vec2(-0.000306052, -0.002356705),\n        vec2(0.001736706, 0.000814865),\n        vec2(-0.001486662, -0.002186416),\n        vec2(0.000385958, -0.001315065),\n        vec2(-0.000377918, -0.001417942),\n        vec2(-0.002676844, 0.000849090),\n        vec2(-0.000992923, 0.001142590),\n        vec2(0.002858903, -0.000775745),\n        vec2(0.001124452, -0.000808151),\n        vec2(-0.001081824, 0.002810300),\n        vec2(0.001917646, -0.003381449),\n        vec2(0.002532672, 0.002741359),\n        vec2(0.000043204, 0.002074181),\n        vec2(-0.000232631, -0.003496559),\n        vec2(0.000538786, -0.002677191),\n        vec2(-0.000620908, -0.000672050),\n        vec2(-0.000038334, 0.001324119),\n        vec2(-0.000333107, 0.003898435),\n        vec2(-0.002566757, -0.002968814),\n        vec2(-0.000990887, -0.003798673),\n        vec2(-0.001278396, -0.001460586),\n        vec2(-0.002363481, 0.003152404),\n        vec2(0.000504303, 0.000322797),\n        vec2(-0.001291619, 0.000403593),\n        vec2(-0.002741111, -0.002216616),\n        vec2(0.003758870, 0.000721322),\n        vec2(-0.000958781, 0.002056650),\n        vec2(-0.001718005, -0.003391369),\n        vec2(-0.000282554, 0.000168061),\n        vec2(0.000391012, -0.000496907),\n        vec2(-0.002569915, -0.000183321),\n        vec2(-0.002158593, 0.002337736),\n        vec2(-0.002784751, 0.001665443),\n        vec2(-0.000211191, 0.003141459),\n        vec2(0.002482065, 0.001614450)\n    );\n    \n    const float WEIGHTS[64] = float[64](\n        0.012345038,\n        0.015307326,\n        0.017547290,\n        0.014949283,\n        0.018569206,\n        0.017473627,\n        0.012787556,\n        0.012818723,\n        0.016584087,\n        0.015072473,\n        0.013086536,\n        0.013050066,\n        0.013889520,\n        0.015092703,\n        0.016641860,\n        0.012392808,\n        0.012370333,\n        0.012682144,\n        0.012597867,\n        0.016566322,\n        0.016024726,\n        0.018730428,\n        0.015604731,\n        0.017482054,\n        0.013000772,\n        0.012884833,\n        0.014173833,\n        0.019177721,\n        0.013521458,\n        0.017021661,\n        0.018101111,\n        0.016322140,\n        0.019149553,\n        0.018985679,\n        0.015871524,\n        0.018903964,\n        0.015436828,\n        0.019126144,\n        0.015296118,\n        0.012663726,\n        0.013140276,\n        0.017751592,\n        0.013835350,\n        0.016085639,\n        0.019782868,\n        0.019223660,\n        0.012585929,\n        0.012549270,\n        0.012545476,\n        0.018051709,\n        0.012501678,\n        0.020081006,\n        0.019177815,\n        0.013771922,\n        0.012847946,\n        0.017288986,\n        0.012927079,\n        0.020238780,\n        0.020055114,\n        0.016502938,\n        0.014799397,\n        0.014613726,\n        0.014897381,\n        0.015440692\n    );\n    \n    const int POINTS_COUNT = 64;\n    const float RADIUS = 0.004000000;\n    const float TOTAL_WEIGHT = 1.000000000;\n\n    vec3 col = vec3(0.);\n\n    for (int i = 0; i < POINTS_COUNT; i++) {\n        col += (texture(tex, vUv + POINTS[i] * spread).rgb) * WEIGHTS[i];\n    }\n\n    FragColor = vec4(max(col, 0.), 1.);\n}"},{"filename":"bloomUpSample.frag","contents":"#version 300 es\n\nprecision highp float;\n\nin vec2 vUv;\nout vec4 FragColor;\n\nuniform sampler2D tex0;\nuniform sampler2D tex1;\n\nvoid main() {\n    const vec2 POINTS[64] = vec2[64](\n        vec2(-0.003881274, 0.000928915),\n        vec2(-0.000865569, -0.002880188),\n        vec2(0.001102385, 0.001859909),\n        vec2(0.001759688, 0.002589512),\n        vec2(-0.001659685, -0.000329540),\n        vec2(-0.001822142, 0.001220218),\n        vec2(0.003623614, -0.001292130),\n        vec2(-0.003551945, -0.001451195),\n        vec2(0.002163543, -0.001341711),\n        vec2(0.002203958, -0.002163799),\n        vec2(0.001143628, -0.003571097),\n        vec2(0.003261412, 0.001874330),\n        vec2(-0.003474127, 0.000292293),\n        vec2(-0.002781102, -0.001327407),\n        vec2(0.002523564, 0.000038062),\n        vec2(0.002036824, 0.003413932),\n        vec2(-0.003587476, 0.001729648),\n        vec2(-0.001293790, 0.003659394),\n        vec2(0.000828157, 0.003820023),\n        vec2(0.001193215, -0.002256466),\n        vec2(0.000501027, 0.002707031),\n        vec2(0.001602391, -0.000137347),\n        vec2(0.002787795, 0.000810632),\n        vec2(-0.001923072, -0.001046660),\n        vec2(0.003049630, -0.002229524),\n        vec2(-0.002909376, 0.002468441),\n        vec2(0.003385159, -0.000217441),\n        vec2(0.000960226, 0.000953568),\n        vec2(-0.003560805, -0.000578855),\n        vec2(-0.000306052, -0.002356705),\n        vec2(0.001736706, 0.000814865),\n        vec2(-0.001486662, -0.002186416),\n        vec2(0.000385958, -0.001315065),\n        vec2(-0.000377918, -0.001417942),\n        vec2(-0.002676844, 0.000849090),\n        vec2(-0.000992923, 0.001142590),\n        vec2(0.002858903, -0.000775745),\n        vec2(0.001124452, -0.000808151),\n        vec2(-0.001081824, 0.002810300),\n        vec2(0.001917646, -0.003381449),\n        vec2(0.002532672, 0.002741359),\n        vec2(0.000043204, 0.002074181),\n        vec2(-0.000232631, -0.003496559),\n        vec2(0.000538786, -0.002677191),\n        vec2(-0.000620908, -0.000672050),\n        vec2(-0.000038334, 0.001324119),\n        vec2(-0.000333107, 0.003898435),\n        vec2(-0.002566757, -0.002968814),\n        vec2(-0.000990887, -0.003798673),\n        vec2(-0.001278396, -0.001460586),\n        vec2(-0.002363481, 0.003152404),\n        vec2(0.000504303, 0.000322797),\n        vec2(-0.001291619, 0.000403593),\n        vec2(-0.002741111, -0.002216616),\n        vec2(0.003758870, 0.000721322),\n        vec2(-0.000958781, 0.002056650),\n        vec2(-0.001718005, -0.003391369),\n        vec2(-0.000282554, 0.000168061),\n        vec2(0.000391012, -0.000496907),\n        vec2(-0.002569915, -0.000183321),\n        vec2(-0.002158593, 0.002337736),\n        vec2(-0.002784751, 0.001665443),\n        vec2(-0.000211191, 0.003141459),\n        vec2(0.002482065, 0.001614450)\n    );\n    \n    const float WEIGHTS[64] = float[64](\n        0.012345038,\n        0.015307326,\n        0.017547290,\n        0.014949283,\n        0.018569206,\n        0.017473627,\n        0.012787556,\n        0.012818723,\n        0.016584087,\n        0.015072473,\n        0.013086536,\n        0.013050066,\n        0.013889520,\n        0.015092703,\n        0.016641860,\n        0.012392808,\n        0.012370333,\n        0.012682144,\n        0.012597867,\n        0.016566322,\n        0.016024726,\n        0.018730428,\n        0.015604731,\n        0.017482054,\n        0.013000772,\n        0.012884833,\n        0.014173833,\n        0.019177721,\n        0.013521458,\n        0.017021661,\n        0.018101111,\n        0.016322140,\n        0.019149553,\n        0.018985679,\n        0.015871524,\n        0.018903964,\n        0.015436828,\n        0.019126144,\n        0.015296118,\n        0.012663726,\n        0.013140276,\n        0.017751592,\n        0.013835350,\n        0.016085639,\n        0.019782868,\n        0.019223660,\n        0.012585929,\n        0.012549270,\n        0.012545476,\n        0.018051709,\n        0.012501678,\n        0.020081006,\n        0.019177815,\n        0.013771922,\n        0.012847946,\n        0.017288986,\n        0.012927079,\n        0.020238780,\n        0.020055114,\n        0.016502938,\n        0.014799397,\n        0.014613726,\n        0.014897381,\n        0.015440692\n    );\n    \n    const int POINTS_COUNT = 64;\n    const float RADIUS = 0.004000000;\n    const float TOTAL_WEIGHT = 1.000000000;\n\n    vec3 col = vec3(0.);\n    float spread = 5.;\n\n    for (int i = 0; i < POINTS_COUNT; i++) {\n        col += (texture(tex0, vUv + POINTS[i] * spread).rgb) * WEIGHTS[i] * 0.95;\n        col += (texture(tex1, vUv + POINTS[i] * spread).rgb) * WEIGHTS[i];\n    }\n\n    FragColor = vec4(col, 1.);\n}"}],"pipelineGraph":{"nodes":[{"id":"0.4025455024919875","type":"uniform","position":{"x":6,"y":-75},"data":{"label":"uniform node","type":"projection","fov":45,"near":0.1,"far":100},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.5984985949643993","type":"uniform","position":{"x":-94,"y":350},"data":{"label":"uniform node","type":"view","x":-8,"y":4,"z":5,"targetX":-1,"targetY":1,"targetZ":-0.7,"upX":0,"upY":1,"upZ":0},"origin":[0.5,0],"measured":{"width":162,"height":333},"selected":false,"dragging":false},{"id":"0.6788965243760299","type":"shader","position":{"x":711,"y":50},"data":{"label":"shader node","shaderSourceFileName":"main.vert"},"origin":[0.5,0],"measured":{"width":222,"height":153},"selected":false,"dragging":false},{"id":"0.6883502327990607","type":"gl-program","position":{"x":1341,"y":200},"data":{"label":"gl-program node"},"origin":[0.5,0],"measured":{"width":132,"height":87},"selected":false,"dragging":false},{"id":"0.4656143492836935","type":"shader","position":{"x":886,"y":225},"data":{"label":"shader node","shaderSourceFileName":"main.frag"},"origin":[0.5,0],"measured":{"width":222,"height":121},"selected":false,"dragging":false},{"id":"0.07296797580900671","type":"uniform","position":{"x":281,"y":475},"data":{"label":"uniform node","type":"time"},"origin":[0.5,0],"measured":{"width":162,"height":74},"selected":false,"dragging":false},{"id":"0.3762754214092061","type":"macro","position":{"x":417,"y":675},"data":{"label":"macro node","name":"scene"},"origin":[0.5,0],"measured":{"width":133,"height":112},"selected":false,"dragging":false},{"id":"0.5024430674378506","type":"uniform","position":{"x":206,"y":-50},"data":{"label":"uniform node","type":"translation","x":0},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.15950623553268528","type":"gl-program","position":{"x":941,"y":675},"data":{"label":"gl-program node"},"origin":[0.5,0],"measured":{"width":132,"height":87},"selected":false,"dragging":false},{"id":"0.9874474568613121","type":"framebuffer","position":{"x":1138.5,"y":600},"data":{"label":"framebuffer node","scaleFactor":1,"resizeMode":"Nearest","isDepthMap":true,"frameBufferType":"Depth"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.44183083112787824","type":"shader","position":{"x":786,"y":600},"data":{"label":"shader node","shaderSourceFileName":"empty.frag"},"origin":[0.5,0],"measured":{"width":222,"height":72},"selected":false,"dragging":false},{"id":"0.16182435250483107","type":"shader","position":{"x":761,"y":775},"data":{"label":"shader node","shaderSourceFileName":"shadowProj.vert"},"origin":[0.5,0],"measured":{"width":222,"height":121},"selected":false,"dragging":false},{"id":"0.44483423891033413","type":"uniform","position":{"x":256,"y":1000},"data":{"label":"uniform node","type":"view","fov":45,"near":0.1,"far":100,"x":4,"y":4,"z":4,"targetX":0,"targetY":0,"targetZ":0,"upX":0,"upY":1,"upZ":0},"origin":[0.5,0],"measured":{"width":162,"height":333},"selected":false,"dragging":false},{"id":"0.42358799011209314","type":"uniform","position":{"x":256,"y":800},"data":{"label":"uniform node","type":"projection","fov":74,"near":0.1,"far":100},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.5638351826652657","type":"framebuffer","position":{"x":1544.5,"y":50},"data":{"label":"framebuffer node","scaleFactor":2,"resizeMode":"Linear","frameBufferType":"Colour HDR"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.5163349535824284","type":"macro","position":{"x":3116.5,"y":150},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.5895737960536305","type":"shader","position":{"x":2861,"y":100},"data":{"label":"shader node","shaderSourceFileName":"post.frag"},"origin":[0.5,0],"measured":{"width":222,"height":137},"selected":false,"dragging":false},{"id":"0.3525823623470514","type":"window","position":{"x":3293.5,"y":200},"data":{"label":"window node"},"origin":[0.5,0],"measured":{"width":87,"height":40},"selected":false,"dragging":false},{"id":"0.6450275665217622","type":"uniform","position":{"x":1605.5,"y":375},"data":{"label":"uniform node","type":"time"},"origin":[0.5,0],"measured":{"width":162,"height":74},"selected":false,"dragging":false},{"id":"0.5227748928253866","type":"uniform","position":{"x":1580.5,"y":225},"data":{"label":"uniform node","type":"window size"},"origin":[0.5,0],"measured":{"width":162,"height":74},"selected":false,"dragging":false},{"id":"0.15354712763494405","type":"macro","position":{"x":2041.5,"y":-200},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.1965765254424101","type":"shader","position":{"x":1786,"y":-150},"data":{"label":"shader node","shaderSourceFileName":"bloomDownSample.frag"},"origin":[0.5,0],"measured":{"width":222,"height":104},"selected":false,"dragging":false},{"id":"0.845882997339775","type":"framebuffer","position":{"x":2269.5,"y":-175},"data":{"label":"framebuffer node","scaleFactor":0.5,"resizeMode":"Linear","frameBufferType":"Colour HDR"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.1349166251171512","type":"macro","position":{"x":2041.5,"y":-375},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.018534937522998174","type":"shader","position":{"x":1786,"y":-325},"data":{"label":"shader node","shaderSourceFileName":"bloomDownSample.frag"},"origin":[0.5,0],"measured":{"width":222,"height":104},"selected":false,"dragging":false},{"id":"0.3295050200198517","type":"framebuffer","position":{"x":2269.5,"y":-375},"data":{"label":"framebuffer node","scaleFactor":0.2,"resizeMode":"Linear","frameBufferType":"Colour HDR"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.5585626636664391","type":"shader","position":{"x":1786,"y":-500},"data":{"label":"shader node","shaderSourceFileName":"bloomDownSample.frag"},"origin":[0.5,0],"measured":{"width":222,"height":104},"selected":false,"dragging":false},{"id":"0.31031129587007666","type":"macro","position":{"x":2041.5,"y":-550},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.20878779375565348","type":"framebuffer","position":{"x":2269.5,"y":-550},"data":{"label":"framebuffer node","scaleFactor":0.1,"resizeMode":"Linear","frameBufferType":"Colour"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.25825779849248165","type":"framebuffer","position":{"x":3094.5,"y":-450},"data":{"label":"framebuffer node","scaleFactor":0.5,"resizeMode":"Linear","frameBufferType":"Colour HDR"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.5874306719799303","type":"shader","position":{"x":2611,"y":-450},"data":{"label":"shader node","shaderSourceFileName":"bloomUpSample.frag"},"origin":[0.5,0],"measured":{"width":222,"height":104},"selected":false,"dragging":false},{"id":"0.4224745732340742","type":"macro","position":{"x":2866.5,"y":-475},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.725208314080517","type":"shader","position":{"x":2611,"y":-275},"data":{"label":"shader node","shaderSourceFileName":"bloomUpSample.frag"},"origin":[0.5,0],"measured":{"width":222,"height":104},"selected":false,"dragging":false},{"id":"0.5757825704751964","type":"macro","position":{"x":2866.5,"y":-275},"data":{"label":"macro node","name":"screen pass"},"origin":[0.5,0],"measured":{"width":133,"height":132},"selected":false,"dragging":false},{"id":"0.3069376196340805","type":"framebuffer","position":{"x":3094.5,"y":-275},"data":{"label":"framebuffer node","scaleFactor":0.8,"resizeMode":"Linear","frameBufferType":"Colour HDR"},"origin":[0.5,0],"measured":{"width":189,"height":131},"selected":false,"dragging":false},{"id":"0.9256539839880042","type":"uniform","position":{"x":1506,"y":-150},"data":{"label":"uniform node","type":"float","value":8},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false},{"id":"0.5469207115293591","type":"uniform","position":{"x":1506,"y":-325},"data":{"label":"uniform node","type":"float","value":20},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":true,"dragging":false},{"id":"0.0021682234864686123","type":"uniform","position":{"x":1531,"y":-500},"data":{"label":"uniform node","type":"float","value":39},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false}],"edges":[{"source":"0.4025455024919875","sourceHandle":"__output","target":"0.6788965243760299","targetHandle":"projection","id":"xy-edge__0.4025455024919875__output-0.6788965243760299projection","selected":false},{"source":"0.5984985949643993","sourceHandle":"__output","target":"0.6788965243760299","targetHandle":"view","id":"xy-edge__0.5984985949643993__output-0.6788965243760299view","selected":false},{"source":"0.6788965243760299","sourceHandle":"__output","target":"0.6883502327990607","targetHandle":"vert","id":"xy-edge__0.6788965243760299__output-0.6883502327990607vert","selected":false},{"source":"0.4656143492836935","sourceHandle":"__output","target":"0.6883502327990607","targetHandle":"frag","id":"xy-edge__0.4656143492836935__output-0.6883502327990607frag","selected":false},{"source":"0.07296797580900671","sourceHandle":"__output","target":"0.4656143492836935","targetHandle":"time","id":"xy-edge__0.07296797580900671__output-0.4656143492836935time","selected":false},{"source":"0.3762754214092061","target":"0.6883502327990607","targetHandle":"geometry","id":"xy-edge__0.3762754214092061-0.6883502327990607geometry","selected":false},{"source":"0.5024430674378506","sourceHandle":"__output","target":"0.6788965243760299","targetHandle":"model","id":"xy-edge__0.5024430674378506__output-0.6788965243760299model","selected":false},{"source":"0.3762754214092061","target":"0.15950623553268528","targetHandle":"geometry","id":"xy-edge__0.3762754214092061-0.15950623553268528geometry","selected":false},{"source":"0.15950623553268528","sourceHandle":"__output","target":"0.9874474568613121","targetHandle":"in","id":"xy-edge__0.15950623553268528__output-0.9874474568613121in","selected":false},{"source":"0.44183083112787824","sourceHandle":"__output","target":"0.15950623553268528","targetHandle":"frag","id":"xy-edge__0.44183083112787824__output-0.15950623553268528frag","selected":false},{"source":"0.16182435250483107","sourceHandle":"__output","target":"0.15950623553268528","targetHandle":"vert","id":"xy-edge__0.16182435250483107__output-0.15950623553268528vert","selected":false},{"source":"0.44483423891033413","sourceHandle":"__output","target":"0.16182435250483107","targetHandle":"view","id":"xy-edge__0.44483423891033413__output-0.16182435250483107view","selected":false},{"source":"0.9874474568613121","sourceHandle":"out","target":"0.4656143492836935","targetHandle":"shadowMap","id":"xy-edge__0.9874474568613121out-0.4656143492836935shadowMap","selected":false},{"source":"0.42358799011209314","sourceHandle":"__output","target":"0.16182435250483107","targetHandle":"projection","id":"xy-edge__0.42358799011209314__output-0.16182435250483107projection","selected":false},{"source":"0.42358799011209314","sourceHandle":"__output","target":"0.6788965243760299","targetHandle":"lightProjection","id":"xy-edge__0.42358799011209314__output-0.6788965243760299lightProjection","selected":false},{"source":"0.44483423891033413","sourceHandle":"__output","target":"0.6788965243760299","targetHandle":"lightView","id":"xy-edge__0.44483423891033413__output-0.6788965243760299lightView","selected":false},{"source":"0.6883502327990607","sourceHandle":"__output","target":"0.5638351826652657","targetHandle":"in","id":"xy-edge__0.6883502327990607__output-0.5638351826652657in","selected":false},{"source":"0.5895737960536305","sourceHandle":"__output","target":"0.5163349535824284","targetHandle":"frag","id":"xy-edge__0.5895737960536305__output-0.5163349535824284frag","selected":false},{"source":"0.5638351826652657","sourceHandle":"out","target":"0.5895737960536305","targetHandle":"tex","id":"xy-edge__0.5638351826652657out-0.5895737960536305tex","selected":false},{"source":"0.5163349535824284","target":"0.3525823623470514","targetHandle":"in","id":"xy-edge__0.5163349535824284-0.3525823623470514in","selected":false},{"source":"0.6450275665217622","sourceHandle":"__output","target":"0.5895737960536305","targetHandle":"time","id":"xy-edge__0.6450275665217622__output-0.5895737960536305time","selected":false},{"source":"0.5227748928253866","sourceHandle":"__output","target":"0.5895737960536305","targetHandle":"screenSize","id":"xy-edge__0.5227748928253866__output-0.5895737960536305screenSize","selected":false},{"source":"0.1965765254424101","sourceHandle":"__output","target":"0.15354712763494405","targetHandle":"frag","id":"xy-edge__0.1965765254424101__output-0.15354712763494405frag","selected":false},{"source":"0.5638351826652657","sourceHandle":"out","target":"0.1965765254424101","targetHandle":"tex","id":"xy-edge__0.5638351826652657out-0.1965765254424101tex","selected":false},{"source":"0.15354712763494405","target":"0.845882997339775","targetHandle":"in","id":"xy-edge__0.15354712763494405-0.845882997339775in","selected":false},{"source":"0.845882997339775","sourceHandle":"out","target":"0.018534937522998174","targetHandle":"tex","id":"xy-edge__0.845882997339775out-0.018534937522998174tex","selected":false},{"source":"0.018534937522998174","sourceHandle":"__output","target":"0.1349166251171512","targetHandle":"frag","id":"xy-edge__0.018534937522998174__output-0.1349166251171512frag","selected":false},{"source":"0.1349166251171512","target":"0.3295050200198517","targetHandle":"in","id":"xy-edge__0.1349166251171512-0.3295050200198517in","selected":false},{"source":"0.5585626636664391","sourceHandle":"__output","target":"0.31031129587007666","targetHandle":"frag","id":"xy-edge__0.5585626636664391__output-0.31031129587007666frag","selected":false},{"source":"0.31031129587007666","target":"0.20878779375565348","targetHandle":"in","id":"xy-edge__0.31031129587007666-0.20878779375565348in","selected":false},{"source":"0.3295050200198517","sourceHandle":"out","target":"0.5585626636664391","targetHandle":"tex","id":"xy-edge__0.3295050200198517out-0.5585626636664391tex","selected":false},{"source":"0.20878779375565348","sourceHandle":"out","target":"0.5874306719799303","targetHandle":"tex0","id":"xy-edge__0.20878779375565348out-0.5874306719799303tex0","selected":false},{"source":"0.3295050200198517","sourceHandle":"out","target":"0.5874306719799303","targetHandle":"tex1","id":"xy-edge__0.3295050200198517out-0.5874306719799303tex1","selected":false},{"source":"0.5874306719799303","sourceHandle":"__output","target":"0.4224745732340742","targetHandle":"frag","id":"xy-edge__0.5874306719799303__output-0.4224745732340742frag","selected":false},{"source":"0.4224745732340742","target":"0.25825779849248165","targetHandle":"in","id":"xy-edge__0.4224745732340742-0.25825779849248165in","selected":false},{"source":"0.725208314080517","sourceHandle":"__output","target":"0.5757825704751964","targetHandle":"frag","id":"xy-edge__0.725208314080517__output-0.5757825704751964frag","selected":false},{"source":"0.25825779849248165","sourceHandle":"out","target":"0.725208314080517","targetHandle":"tex0","id":"xy-edge__0.25825779849248165out-0.725208314080517tex0","selected":false},{"source":"0.845882997339775","sourceHandle":"out","target":"0.725208314080517","targetHandle":"tex1","id":"xy-edge__0.845882997339775out-0.725208314080517tex1","selected":false},{"source":"0.5757825704751964","target":"0.3069376196340805","targetHandle":"in","id":"xy-edge__0.5757825704751964-0.3069376196340805in","selected":false},{"source":"0.3069376196340805","sourceHandle":"out","target":"0.5895737960536305","targetHandle":"bloom","id":"xy-edge__0.3069376196340805out-0.5895737960536305bloom","selected":false},{"source":"0.9256539839880042","sourceHandle":"__output","target":"0.1965765254424101","targetHandle":"spread","id":"xy-edge__0.9256539839880042__output-0.1965765254424101spread","selected":false},{"source":"0.5469207115293591","sourceHandle":"__output","target":"0.018534937522998174","targetHandle":"spread","id":"xy-edge__0.5469207115293591__output-0.018534937522998174spread","selected":false},{"source":"0.0021682234864686123","sourceHandle":"__output","target":"0.5585626636664391","targetHandle":"spread","id":"xy-edge__0.0021682234864686123__output-0.5585626636664391spread","selected":false}]},"macros":[{"name":"scene","inputLabels":[],"graph":{"nodes":[{"id":"0.7254421557490351","type":"output","data":{},"position":{"x":575,"y":100},"measured":{"width":150,"height":49},"selected":false,"dragging":false},{"id":"0.5270824240425167","type":"inputs","data":{"inputLabels":{}},"position":{"x":-550,"y":-150},"measured":{"width":162,"height":62},"selected":false,"dragging":false},{"id":"0.8558785786199814","type":"geometry","position":{"x":252.5,"y":-175},"data":{"label":"geometry node","type":"Model","uniformOverrides":["model","luminescence"],"modelSrc":"cube.obj"},"origin":[0.5,0],"measured":{"width":333,"height":172},"selected":false,"dragging":false},{"id":"0.26990307538008973","type":"geometry","position":{"x":266.5,"y":25},"data":{"label":"geometry node","type":"Model","uniformOverrides":["model","luminescence"],"modelSrc":"sphere.obj"},"origin":[0.5,0],"measured":{"width":333,"height":172},"selected":false,"dragging":false},{"id":"0.2547230567857732","type":"geometry","position":{"x":216.5,"y":300},"data":{"label":"geometry node","type":"Model","uniformOverrides":["model","luminescence"],"modelSrc":"monkey.obj"},"origin":[0.5,0],"measured":{"width":333,"height":172},"selected":false,"dragging":false},{"id":"0.4924650761530207","type":"uniform","position":{"x":-144,"y":-350},"data":{"label":"uniform node","type":"translation","y":0,"z":-2,"x":0},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.5557933679953182","type":"uniform","position":{"x":-144,"y":-50},"data":{"label":"uniform node","type":"translation","y":2,"x":-3,"z":-1},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.7648602964324309","type":"uniform","position":{"x":-119,"y":250},"data":{"label":"uniform node","type":"translation","x":0.5,"z":1,"y":1.4},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.9822433901767949","type":"uniform","position":{"x":-119,"y":425},"data":{"label":"uniform node","type":"float"},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false},{"id":"0.10540067184525626","type":"uniform","position":{"x":-144,"y":125},"data":{"label":"uniform node","type":"float"},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false},{"id":"0.9462699981840266","type":"uniform","position":{"x":-144,"y":-175},"data":{"label":"uniform node","type":"float"},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false},{"id":"0.3488976590240809","type":"geometry","position":{"x":241.5,"y":575},"data":{"label":"geometry node","type":"Model","uniformOverrides":["model","luminescence"],"modelSrc":"cone.obj"},"origin":[0.5,0],"measured":{"width":333,"height":172},"selected":false,"dragging":false},{"id":"0.9235467049334176","type":"uniform","position":{"x":-119,"y":575},"data":{"label":"uniform node","type":"translation","y":1,"x":3,"z":-3},"origin":[0.5,0],"measured":{"width":162,"height":161},"selected":false,"dragging":false},{"id":"0.20057308832230958","type":"uniform","position":{"x":-119,"y":775},"data":{"label":"uniform node","type":"float","value":1.3},"origin":[0.5,0],"measured":{"width":162,"height":99},"selected":false,"dragging":false}],"edges":[{"source":"0.2547230567857732","sourceHandle":"__output","target":"0.7254421557490351","targetHandle":"in","id":"xy-edge__0.09229821433620944__output-0in","selected":false},{"source":"0.26990307538008973","sourceHandle":"__output","target":"0.7254421557490351","targetHandle":"in","id":"xy-edge__0.7092132330014198__output-0in","selected":false},{"source":"0.8558785786199814","sourceHandle":"__output","target":"0.7254421557490351","targetHandle":"in","id":"xy-edge__0.15687022720788857__output-0in","selected":false},{"source":"0.4924650761530207","sourceHandle":"__output","target":"0.8558785786199814","targetHandle":"model","id":"xy-edge__0.835459651683528__output-0.25163250135530624model","selected":false},{"source":"0.5557933679953182","sourceHandle":"__output","target":"0.26990307538008973","targetHandle":"model","id":"xy-edge__0.29017415420774983__output-0.3794801820851914model","selected":false},{"source":"0.7648602964324309","sourceHandle":"__output","target":"0.2547230567857732","targetHandle":"model","id":"xy-edge__0.2229827157283073__output-0.9394445600187695model","selected":false},{"source":"0.9822433901767949","sourceHandle":"__output","target":"0.2547230567857732","targetHandle":"luminescence","id":"xy-edge__0.9822433901767949__output-0.2547230567857732luminescence","selected":false},{"source":"0.10540067184525626","sourceHandle":"__output","target":"0.26990307538008973","targetHandle":"luminescence","id":"xy-edge__0.10540067184525626__output-0.26990307538008973luminescence","selected":false},{"source":"0.9462699981840266","sourceHandle":"__output","target":"0.8558785786199814","targetHandle":"luminescence","id":"xy-edge__0.9462699981840266__output-0.8558785786199814luminescence","selected":false},{"source":"0.9235467049334176","sourceHandle":"__output","target":"0.3488976590240809","targetHandle":"model","id":"xy-edge__0.9235467049334176__output-0.3488976590240809model","selected":false},{"source":"0.3488976590240809","sourceHandle":"__output","target":"0.7254421557490351","targetHandle":"in","id":"xy-edge__0.3488976590240809__output-0.7254421557490351in","selected":false},{"source":"0.20057308832230958","sourceHandle":"__output","target":"0.3488976590240809","targetHandle":"luminescence","id":"xy-edge__0.20057308832230958__output-0.3488976590240809luminescence","selected":false}]}},{"name":"screen pass","inputLabels":["frag"],"graph":{"nodes":[{"id":"0","type":"output","data":{},"position":{"x":475,"y":0},"measured":{"width":150,"height":49},"selected":false,"dragging":false},{"id":"1","type":"inputs","data":{"inputLabels":{}},"position":{"x":0,"y":-25},"measured":{"width":162,"height":77},"selected":false,"dragging":false},{"id":"0.9289588018011166","type":"geometry","position":{"x":140.5,"y":100},"data":{"label":"geometry node","type":"Screen Quad","uniformOverrides":[]},"origin":[0.5,0],"measured":{"width":132,"height":122},"selected":false,"dragging":false},{"id":"0.21751759114536062","type":"gl-program","position":{"x":340.5,"y":-25},"data":{"label":"gl-program node"},"origin":[0.5,0],"measured":{"width":132,"height":87},"selected":false,"dragging":false},{"id":"0.2873844403680341","type":"shader","position":{"x":110.5,"y":-125},"data":{"label":"shader node","shaderSourceFileName":"screen.vert"},"origin":[0.5,0],"measured":{"width":222,"height":72},"selected":false,"dragging":false}],"edges":[{"source":"0.9289588018011166","sourceHandle":"__output","target":"0.21751759114536062","targetHandle":"geometry","id":"xy-edge__0.9289588018011166__output-0.21751759114536062geometry","selected":false},{"source":"0.21751759114536062","sourceHandle":"__output","target":"0","targetHandle":"in","id":"xy-edge__0.21751759114536062__output-0in","selected":false},{"source":"1","sourceHandle":"frag","target":"0.21751759114536062","targetHandle":"frag","id":"xy-edge__1frag-0.21751759114536062frag","selected":false},{"source":"0.2873844403680341","sourceHandle":"__output","target":"0.21751759114536062","targetHandle":"vert","id":"xy-edge__0.2873844403680341__output-0.21751759114536062vert","selected":false}]}}]}